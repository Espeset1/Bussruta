<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bussruta - Drikkelek</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <main>
        <div class="container">
            <!-- Lobby Section -->
            <section id="lobby-section" class="lobby-section">
                <div class="bus-route-header">
                    <h1>🚌 BUSSRUTA 🚌</h1>
                    <p class="route-tagline">Hop på bussen og ta deg en tur gjennom kortpyramiden!</p>
                </div>
                <div class="lobby-container">
                    <div class="join-options">
                        <div class="create-room">
                            <h3>Opprett nytt spill</h3>
                            <input type="text" id="player-name" placeholder="Ditt navn" maxlength="20">
                            <button id="create-room-btn" class="game-btn">Opprett rom</button>
                        </div>
                        <div class="join-room">
                            <h3>Bli med i spill</h3>
                            <input type="text" id="room-code" placeholder="Romkode" maxlength="6">
                            <input type="text" id="join-player-name" placeholder="Ditt navn" maxlength="20">
                            <button id="join-room-btn" class="game-btn">Bli med</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Game Section -->
            <section id="game-section" class="game-section" style="display: none;">
                <div class="breadcrumb">
                    <a href="#" id="leave-game">🚌 ← Forlat bussen</a>
                    <span class="route-status">🎯 Bussruta Lobby</span>
                    <span id="room-code-display"></span>
                </div>

                <div class="game-header">
                    <div class="bus-display">
                        <div class="bus-icon">🚌</div>
                        <h1>Bussruta Terminal</h1>
                    </div>
                    <div class="game-info">
                        <div class="info-item">
                            <strong>🎫 Passasjerer:</strong> <span id="player-count">0</span>
                        </div>
                        <div class="info-item">
                            <strong>🚦 Rutstatus:</strong> <span id="game-status">Venter på passasjerer...</span>
                        </div>
                    </div>
                    <button id="start-game-btn" class="game-btn bus-start-btn" style="display: none;">🚌 Start bussruten!</button>
                </div>

                <div class="passengers-list">
                    <h3>🎫 Passasjerer på bussen:</h3>
                    <div id="players-container"></div>
                </div>
            </section>

            <!-- Playing Section -->
            <section id="playing-section" class="playing-section" style="display: none;">
                <div class="breadcrumb">
                    <a href="#" id="leave-playing">🚌 ← Forlat bussen</a>
                    <span class="route-status">🎯 Bussruta i farta</span>
                    <span id="playing-room-code"></span>
                </div>

                <div class="game-status-bar">
                    <div class="status-item">
                        <strong>🎴 Kort på hånd:</strong> <span id="hand-count">0</span>
                    </div>
                    <div class="status-item">
                        <strong>🎯 Kort spilt:</strong> <span id="cards-played">0</span>
                    </div>
                    <div class="status-item">
                        <strong>🚏 Nåværende stoppested:</strong> <span id="current-card-info">Ingen</span>
                    </div>
                </div>

                <div class="pyramid-section">
                    <h2>🚏 Busstopp Pyramide</h2>
                    <div class="pyramid-container">
                        <div class="pyramid" id="game-pyramid">
                            <!-- Pyramid will be generated by JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="player-hand-section">
                    <h3>🎴 Dine billett-kort:</h3>
                    <div id="player-hand" class="player-hand">
                        <!-- Player cards will be displayed here -->
                    </div>
                </div>

                <div class="game-actions">
                    <button id="next-card-btn" class="game-btn" style="margin: 1rem 0;">⏭️ Neste kort (test)</button>
                    
                    <div id="drink-confirmation" class="drink-confirmation" style="display: none;">
                        <p id="drink-message"></p>
                        <button id="confirm-drink-btn" class="drink-btn">Drikk! 🍺</button>
                        <div id="drink-progress"></div>
                    </div>
                    
                    <div id="choose-drinker" class="choose-drinker" style="display: none;">
                        <p id="choose-message"></p>
                        <div id="drinker-options"></div>
                    </div>
                </div>

                <div class="activity-log-section">
                    <h3>Aktivitetslogg</h3>
                    <div id="activity-log" class="activity-log">
                        <!-- Activity feed will be populated here -->
                    </div>
                </div>

                <!-- Celebration Modal -->
                <div id="celebration-modal" class="celebration-modal" style="display: none;">
                    <div class="celebration-content">
                        <h2>🎉 Gratulerer! 🎉</h2>
                        <p>Du overlevde bussruta!</p>
                        <button id="celebration-close" class="game-btn">Lukk</button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>Espeset Drikkeleker – Alt Til Din Samling</p>
            <div class="footer-rating">
                <span>Espeset Drikkeleker</span>
                <span class="rating">5/5</span>
            </div>
        </div>
    </footer>

    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>
</body>
</html>
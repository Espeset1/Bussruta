<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bussruta - Drikkelek</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <main>
        <div class="container">
            <!-- Lobby Section -->
            <section id="lobby-section" class="lobby-section">
                <h1>Bussruta - Multiplayer</h1>
                <div class="lobby-container">
                    <div class="join-options">
                        <div class="create-room">
                            <h3>Opprett nytt spill</h3>
                            <input type="text" id="player-name" placeholder="Ditt navn" maxlength="20">
                            <button id="create-room-btn" class="game-btn">Opprett rom</button>
                        </div>
                        <div class="join-room">
                            <h3>Bli med i spill</h3>
                            <input type="text" id="room-code" placeholder="Romkode" maxlength="6">
                            <input type="text" id="join-player-name" placeholder="Ditt navn" maxlength="20">
                            <button id="join-room-btn" class="game-btn">Bli med</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Game Section -->
            <section id="game-section" class="game-section" style="display: none;">
                <div class="breadcrumb">
                    <a href="#" id="leave-game">‚Üê Forlat spill</a>
                    <span>Bussruta</span>
                    <span id="room-code-display"></span>
                </div>

                <div class="game-header">
                    <h1>Bussruta</h1>
                    <div class="game-info">
                        <div class="info-item">
                            <strong>Spillere:</strong> <span id="player-count">0</span>
                        </div>
                        <div class="info-item">
                            <strong>Spillstatus:</strong> <span id="game-status">Venter...</span>
                        </div>
                    </div>
                    <button id="start-game-btn" class="game-btn" style="display: none;">Start spill</button>
                </div>

                <div class="players-list">
                    <h3>Spillere i rommet:</h3>
                    <div id="players-container"></div>
                </div>
            </section>

            <!-- Playing Section -->
            <section id="playing-section" class="playing-section" style="display: none;">
                <div class="breadcrumb">
                    <a href="#" id="leave-playing">‚Üê Forlat spill</a>
                    <span>Bussruta - Spiller</span>
                    <span id="playing-room-code"></span>
                </div>

                <div class="game-status-bar">
                    <div class="status-item">
                        <strong>Kort p√• h√•nd:</strong> <span id="hand-count">0</span>
                    </div>
                    <div class="status-item">
                        <strong>Kort spilt:</strong> <span id="cards-played">0</span>
                    </div>
                    <div class="status-item">
                        <strong>N√•v√¶rende kort:</strong> <span id="current-card-info">Ingen</span>
                    </div>
                </div>

                <div class="pyramid-section">
                    <h2>Pyramide</h2>
                    <div class="pyramid-container">
                        <div class="pyramid" id="game-pyramid">
                            <!-- Pyramid will be generated by JavaScript -->
                        </div>
                    </div>
                </div>

                <div class="player-hand-section">
                    <h3>Dine kort:</h3>
                    <div id="player-hand" class="player-hand">
                        <!-- Player cards will be displayed here -->
                    </div>
                </div>

                <div class="game-actions">
                    <button id="next-card-btn" class="game-btn" style="margin: 1rem 0;">‚è≠Ô∏è Neste kort (test)</button>
                    
                    <div id="drink-confirmation" class="drink-confirmation" style="display: none;">
                        <p id="drink-message"></p>
                        <button id="confirm-drink-btn" class="drink-btn">Drikk! üç∫</button>
                        <div id="drink-progress"></div>
                    </div>
                    
                    <div id="choose-drinker" class="choose-drinker" style="display: none;">
                        <p id="choose-message"></p>
                        <div id="drinker-options"></div>
                    </div>
                </div>

                <div class="activity-log-section">
                    <h3>Aktivitetslogg</h3>
                    <div id="activity-log" class="activity-log">
                        <!-- Activity feed will be populated here -->
                    </div>
                </div>

                <!-- Celebration Modal -->
                <div id="celebration-modal" class="celebration-modal" style="display: none;">
                    <div class="celebration-content">
                        <h2>üéâ Gratulerer! üéâ</h2>
                        <p>Du overlevde bussruta!</p>
                        <button id="celebration-close" class="game-btn">Lukk</button>
                    </div>
                </div>
            </section>

            <div class="breadcrumb">
                <a href="#tilbake">‚Üê Tilbake</a>
                <span>Bussruta</span>
                <a href="#neste">Neste lek ‚Üí</a>
            </div>

            <section class="game-header">
                <h1>Bussruta</h1>
                <div class="game-info">
                    <div class="info-item">
                        <strong>Utstyr:</strong> Kortstokk
                    </div>
                    <div class="info-item">
                        <strong>Antall spillere:</strong> 4+
                    </div>
                </div>
            </section>

            <section class="game-description">
                <p>Her finner du reglene til drikkeleken bussruta. Bussruta byr p√• mye action og spenning. 
                Denne leken passer godt for √• f√• opp stemningen p√• slutten av vorset, f√∏r turen g√•r videre til byen.</p>
                
                <p>Spillet er enkelt, f√∏rst lager dere en pyramide av kortene som vist under. 
                Det er ogs√• mulig √• legge til flere rader og √∏kte/redusere antall slurker, for de som √∏nsker det.</p>
            </section>

            <section class="pyramid-section">
                <h2>Pyramide Oppsett</h2>
                <p>Her er et eksempel med 5 kort i bunnen av pyramiden, og forslag til antall slurker per rad.</p>
                <div class="pyramid-container">
                    <div class="pyramid" id="pyramid">
                        <!-- Pyramid will be generated by JavaScript -->
                    </div>
                </div>
            </section>

            <section class="game-rules">
                <h2>Del 1 av spillet:</h2>
                <p>Del ut 5 kort til hver spiller og start spillet! Snu et kort av gangen, start p√• nederste rad. 
                Dersom en av spillerne har det aktuelle kortet p√• h√•nden, s√• legger de kortet p√• bordet og gir 
                det korrekte antallet slurker til en valgfri spiller. Slik fortsetter spillet helt til alle kortene er snudd.</p>

                <h2>Del 2 av spillet:</h2>
                <p>N√•r alle kortene er snudd skal den spilleren som sitter igjen med flest kort, ¬´ta bussruta¬ª. 
                Dersom det er 2 spillere som har like mange kort igjen, s√• trekker begge spillere et kort fra bunken, 
                den med lavest verdi m√• ta bussruta.</p>

                <h2>Bussruta:</h2>
                <p>Stokk kortene og legge opp en tilsvarende pyramide som sist. Spilleren som tar bussruta, 
                trekker ett kort fra hver rekke fram til man n√•r toppen. Dersom spilleren trekker et bildekort, 
                m√• han/hun drikke antallet slurker p√• rekka og starte p√• nytt. Fyll p√• kort der det mangler, 
                og ta bussruta p√• nytt. Dette p√•g√•r til spilleren har n√•dd toppen uten √• trekke et bildekort.</p>
            </section>

            <section class="share-section">
                <h3>Del med venner:</h3>
                <div class="share-buttons">
                    <button class="share-btn facebook">Facebook</button>
                    <button class="share-btn whatsapp">WhatsApp</button>
                    <button class="share-btn email">Email</button>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>Espeset Drikkeleker ‚Äì Alt Til Din Samling</p>
            <div class="footer-rating">
                <span>Espeset Drikkeleker</span>
                <span class="rating">5/5</span>
            </div>
        </div>
    </footer>

    <script src="/socket.io/socket.io.js"></script>
    <script src="client.js"></script>
</body>
</html>